{%- extends "layout.html" -%}
{%- set title = __('Avatar') -%}
{%- set hidden_content = False -%}
{%- block script -%}
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js" integrity="sha512-aMGMvNYu8Ue4G+fHa359jcPb1u+ytAF+P2SCb+PxrjCdO3n3ZTxJ30zuH39rimUggmTwmh2u7wvQsDTHESnmfQ==" crossorigin="anonymous"></script>
{%- endblock -%}
{%- block content -%}
	<div class="ui-element" style="position: absolute; left: 0; top: 0; right: 0; padding: 0 1rem;">
		<div class="col-12 offset-md-1 col-md-10 offset-lg-2 col-lg-8">
			<div class="d-flex w-100 justify-content-between mt-3">
				<div style="border-radius: 2rem; background-color: rgba(255, 255, 255, 0.9); margin: 0 -0.5rem; padding: 0 0.5rem;">
					<h1 class="m-0">{{ __('Avatar') }}</h1>
				</div>
			</div>
		</div>
	</div>
	<div id="avatar" class="d-flex align-items-center row" style="height: 100vh;">
		<div class="text-center">
			<img src="" alt="" style="max-width: 100%; max-height: 100%; height: 100%;" />
		</div>
	</div>
{%- endblock -%}
{%- block body_script -%}
	<script type="text/javascript">
		$(window).on('load', function() {
			// Prepare avatar page
			$("#avatar").fadeTo(0, 0);
<!--			setInterval(loadNext, 500);-->
			// SocketIO initiate
			var socket = io();
			socket.on( 'connect', function() {
				console.log('connect')
				socket.emit( 'avatar_connected', {
					data: 'Some Data'
				})
<!--				var form = $( 'form' ).on( 'submit', function( e ) {-->
<!--					e.preventDefault()-->
<!--					let user_name = $( 'input.username' ).val()-->
<!--					let user_input = $( 'input.message' ).val()-->
<!--					socket.emit( 'my event', {-->
<!--						user_name : user_name,-->
<!--						message : user_input-->
<!--					})-->
<!--					$( 'input.message' ).val( '' ).focus()-->
<!--				})-->
			})
		})
	</script>
{%- endblock -%}
